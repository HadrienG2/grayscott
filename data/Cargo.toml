[package]
name = "data"
version.workspace = true
edition.workspace = true

[features]
gpu = ["self_cell", "thiserror", "vulkano"]
gpu-parameters = ["bytemuck", "crevice"]
safe_arch = ["dep:safe_arch", "simd"]
simd = []
slipstream = ["simd", "dep:slipstream"]

[dependencies]
cfg-if.workspace = true
ndarray.workspace = true

# HDF5 storage
hdf5 = { workspace = true, optional = true }

# SIMD backends
safe_arch = { workspace = true, optional = true }
slipstream = { workspace = true, optional = true }

# GPU backend dependencies
self_cell = { workspace = true, optional = true }
thiserror = { workspace = true, optional = true }
vulkano = { workspace = true, optional = true }

# Prerequisites to treat parameters as a GPU struct
bytemuck = { workspace = true, optional = true }
crevice = { workspace = true, optional = true }

# Criterion workaround for lack of stable benchmark harness
[lib]
bench = false
